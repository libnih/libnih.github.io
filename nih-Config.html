<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Config</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="NIH Utility Library Reference Manual">
<link rel="up" href="ch02.html" title="Main Loop and Application Development Helpers">
<link rel="prev" href="nih-Command.html" title="Command">
<link rel="next" href="ch03.html" title="Operating System Facilities">
<meta name="generator" content="GTK-Doc V1.19 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="nih-Command.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch02.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">NIH Utility Library Reference Manual</th>
<td><a accesskey="n" href="ch03.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="#nih-Config.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#nih-Config.description" class="shortcut">Description</a>
</td></tr>
</table>
<div class="refentry">
<a name="nih-Config"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="nih-Config.top_of_page"></a>Config</span></h2>
<p>Config — Configuration parser</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="nih-Config.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">typedef             <a class="link" href="nih-Config.html#NihConfigStanza" title="NihConfigStanza">NihConfigStanza</a>;
<span class="returnvalue">int</span>                 (<a class="link" href="nih-Config.html#NihConfigHandler" title="NihConfigHandler ()">*NihConfigHandler</a>)                 (<em class="parameter"><code><span class="type">void</span> *data</code></em>,
                                                         <em class="parameter"><code><a class="link" href="nih-Config.html#NihConfigStanza" title="NihConfigStanza"><span class="type">NihConfigStanza</span></a> *stanza</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);
#define             <a class="link" href="nih-Config.html#NIH-CONFIG-LAST:CAPS" title="NIH_CONFIG_LAST">NIH_CONFIG_LAST</a>
#define             <a class="link" href="nih-Config.html#NIH-CONFIG-WS:CAPS" title="NIH_CONFIG_WS">NIH_CONFIG_WS</a>
#define             <a class="link" href="nih-Config.html#NIH-CONFIG-CNL:CAPS" title="NIH_CONFIG_CNL">NIH_CONFIG_CNL</a>
#define             <a class="link" href="nih-Config.html#NIH-CONFIG-CNLWS:CAPS" title="NIH_CONFIG_CNLWS">NIH_CONFIG_CNLWS</a>
<span class="returnvalue">int</span>                 <a class="link" href="nih-Config.html#nih-config-has-token" title="nih_config_has_token ()">nih_config_has_token</a>                (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="nih-Config.html#nih-config-token" title="nih_config_token ()">nih_config_token</a>                    (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> *dest</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *delim</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> dequote</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *toklen</code></em>);
<span class="returnvalue">char</span> *              <a class="link" href="nih-Config.html#nih-config-next-token" title="nih_config_next_token ()">nih_config_next_token</a>               (<em class="parameter"><code>const <span class="type">void</span> *parent</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *delim</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> dequote</code></em>);
<span class="returnvalue">char</span> *              <a class="link" href="nih-Config.html#nih-config-next-arg" title="nih_config_next_arg ()">nih_config_next_arg</a>                 (<em class="parameter"><code>const <span class="type">void</span> *parent</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="nih-Config.html#nih-config-next-line" title="nih_config_next_line ()">nih_config_next_line</a>                (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);
<span class="returnvalue">void</span>                <a class="link" href="nih-Config.html#nih-config-skip-whitespace" title="nih_config_skip_whitespace ()">nih_config_skip_whitespace</a>          (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="nih-Config.html#nih-config-skip-comment" title="nih_config_skip_comment ()">nih_config_skip_comment</a>             (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);
<span class="returnvalue">char</span> **             <a class="link" href="nih-Config.html#nih-config-parse-args" title="nih_config_parse_args ()">nih_config_parse_args</a>               (<em class="parameter"><code>const <span class="type">void</span> *parent</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);
<span class="returnvalue">char</span> *              <a class="link" href="nih-Config.html#nih-config-parse-command" title="nih_config_parse_command ()">nih_config_parse_command</a>            (<em class="parameter"><code>const <span class="type">void</span> *parent</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);
<span class="returnvalue">char</span> *              <a class="link" href="nih-Config.html#nih-config-parse-block" title="nih_config_parse_block ()">nih_config_parse_block</a>              (<em class="parameter"><code>const <span class="type">void</span> *parent</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *type</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="nih-Config.html#nih-config-skip-block" title="nih_config_skip_block ()">nih_config_skip_block</a>               (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *type</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *endpos</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="nih-Config.html#nih-config-parse-stanza" title="nih_config_parse_stanza ()">nih_config_parse_stanza</a>             (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code><a class="link" href="nih-Config.html#NihConfigStanza" title="NihConfigStanza"><span class="type">NihConfigStanza</span></a> *stanzas</code></em>,
                                                         <em class="parameter"><code><span class="type">void</span> *data</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="nih-Config.html#nih-config-parse-file" title="nih_config_parse_file ()">nih_config_parse_file</a>               (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code><a class="link" href="nih-Config.html#NihConfigStanza" title="NihConfigStanza"><span class="type">NihConfigStanza</span></a> *stanzas</code></em>,
                                                         <em class="parameter"><code><span class="type">void</span> *data</code></em>);
<span class="returnvalue">int</span>                 <a class="link" href="nih-Config.html#nih-config-parse" title="nih_config_parse ()">nih_config_parse</a>                    (<em class="parameter"><code>const <span class="type">char</span> *filename</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code><a class="link" href="nih-Config.html#NihConfigStanza" title="NihConfigStanza"><span class="type">NihConfigStanza</span></a> *stanzas</code></em>,
                                                         <em class="parameter"><code><span class="type">void</span> *data</code></em>);
</pre>
</div>
<div class="refsect1">
<a name="nih-Config.description"></a><h2>Description</h2>
<p>
Implements a flexible configuration parser based on keyword stanzas and zero
or more arguments, handling such matters as quotation, whitespace and
commands for you.
</p>
<p>
You describe the stanzas with an array of NihConfigStanza members,
each is handled by a function that receives a number of arguments
referencing the current position within the file being parsed.
</p>
<p>
The function may then call any of the parsing functions to parse its
arguments, consuming as much of the following file as it wishes.  Most
will call <a class="link" href="nih-Config.html#nih-config-parse-args" title="nih_config_parse_args ()"><code class="function">nih_config_parse_args()</code></a> to do the hard work.
</p>
<p>
Configuration can be parsed as a file with <a class="link" href="nih-Config.html#nih-config-parse-file" title="nih_config_parse_file ()"><code class="function">nih_config_parse_file()</code></a> or
as a string with <a class="link" href="nih-Config.html#nih-config-parse" title="nih_config_parse ()"><code class="function">nih_config_parse()</code></a>.
</p>
</div>
<div class="refsect1">
<a name="nih-Config.details"></a><h2>Details</h2>
<div class="refsect2">
<a name="NihConfigStanza"></a><h3>NihConfigStanza</h3>
<pre class="programlisting">typedef struct nih_config_stanza NihConfigStanza;
</pre>
<p>
This structure defines a configuration file stanza, when a stanza
called <em class="parameter"><code>name</code></em> is found within a configuration file, <em class="parameter"><code>handler</code></em> will be
called from a position after the stanza and any following whitespace.
</p>
</div>
<hr>
<div class="refsect2">
<a name="NihConfigHandler"></a><h3>NihConfigHandler ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 (*NihConfigHandler)                 (<em class="parameter"><code><span class="type">void</span> *data</code></em>,
                                                         <em class="parameter"><code><a class="link" href="nih-Config.html#NihConfigStanza" title="NihConfigStanza"><span class="type">NihConfigStanza</span></a> *stanza</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);</pre>
<p>
A config handler is a function that is called when <em class="parameter"><code>stanza</code></em> is found
in a configuration file.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> is given
as the offset within that the stanza's arguments begin, and <em class="parameter"><code>len</code></em> will
be the length of the file as a whole.
</p>
<p>
<em class="parameter"><code>pos</code></em> must be updated to point to the next stanza in the configuration
file, past whatever terminator is used for the one being parsed.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is not NULL, it contains the current line number and must be
incremented each time a new line is discovered in the file.
</p>
<p>
(These things are taken care of for you if you use the nih_config_*
functions).
</p>
<p>
If you encounter errors, you should use the usual logging functions to
output warnings using both <em class="parameter"><code>file</code></em> and <em class="parameter"><code>lineno</code></em>, but only if <em class="parameter"><code>file</code></em>
is not NULL.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>data</code></em> :</span></p></td>
<td>data passed to parser,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>stanza</code></em> :</span></p></td>
<td>stanza found,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>zero on success, negative value on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="NIH-CONFIG-LAST:CAPS"></a><h3>NIH_CONFIG_LAST</h3>
<pre class="programlisting">#define NIH_CONFIG_LAST { NULL, NULL }
</pre>
<p>
This macro may be used as the last stanza in the list to avoid typing
all those NULLs yourself.
</p>
</div>
<hr>
<div class="refsect2">
<a name="NIH-CONFIG-WS:CAPS"></a><h3>NIH_CONFIG_WS</h3>
<pre class="programlisting">#define NIH_CONFIG_WS " \t\r"
</pre>
<p>
Definition of what characters we consider whitespace.
</p>
</div>
<hr>
<div class="refsect2">
<a name="NIH-CONFIG-CNL:CAPS"></a><h3>NIH_CONFIG_CNL</h3>
<pre class="programlisting">#define NIH_CONFIG_CNL "#\n"
</pre>
<p>
Definition of what characters nominally end a line; a comment start
character or a newline.
</p>
</div>
<hr>
<div class="refsect2">
<a name="NIH-CONFIG-CNLWS:CAPS"></a><h3>NIH_CONFIG_CNLWS</h3>
<pre class="programlisting">#define NIH_CONFIG_CNLWS " \t\r#\n"
</pre>
<p>
Defintion of what characters nominally separate tokens.
</p>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-has-token"></a><h3>nih_config_has_token ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 nih_config_has_token                (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);</pre>
<p>
Checks the current position in <em class="parameter"><code>file</code></em> to see whether it has a parseable
token at this position; ie. we're not at the end of file, and the
current character is neither a comment or newline character.
</p>
<p>
If this returns FALSE, it's normal to call <a class="link" href="nih-Config.html#nih-config-skip-comment" title="nih_config_skip_comment ()"><code class="function">nih_config_skip_comment()</code></a>
to move to the next parseable point and check again.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
<em class="parameter"><code>pos</code></em> is used as the offset within <em class="parameter"><code>file</code></em> to begin, otherwise the start
is assumed.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>TRUE if the current character is before the end of file and
is neither a comment or newline, FALSE otherwise.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-token"></a><h3>nih_config_token ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 nih_config_token                    (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code><span class="type">char</span> *dest</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *delim</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> dequote</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *toklen</code></em>);</pre>
<p>
Parses a single token from <em class="parameter"><code>file</code></em> which is stopped when any character
in <em class="parameter"><code>delim</code></em> is encountered outside of a quoted string and not escaped
using a backslash.  The length of the parsed token is stored in <em class="parameter"><code>toklen</code></em>
if given.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.  Usually when <em class="parameter"><code>dest</code></em> is given, <em class="parameter"><code>file</code></em> is instead the pointer to
the start of the token and <em class="parameter"><code>len</code></em> is the difference between the start
and end of the token (NOT the return value from this function).
</p>
<p>
If <em class="parameter"><code>pos</code></em> is given then it will be used as the offset within <em class="parameter"><code>file</code></em> to
begin (otherwise the start is assumed), and will be updated to point
to <em class="parameter"><code>delim</code></em> or past the end of the file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<p>
To copy the token into another string, collapsing any newlines and
surrounding whitespace to a single space, pass <em class="parameter"><code>dest</code></em> which should be
pre-allocated to the right size (obtained by calling this function
with NULL).
</p>
<p>
If you also want quotes to be removed and escaped characters to be
replaced with the character itself, set <em class="parameter"><code>dequote</code></em> to TRUE.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>dest</code></em> :</span></p></td>
<td>destination to copy to,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>delim</code></em> :</span></p></td>
<td>characters to stop on,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>dequote</code></em> :</span></p></td>
<td>remove quotes and escapes.</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>toklen</code></em> :</span></p></td>
<td>pointer to store token length in.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>zero on success, negative value on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-next-token"></a><h3>nih_config_next_token ()</h3>
<pre class="programlisting"><span class="returnvalue">char</span> *              nih_config_next_token               (<em class="parameter"><code>const <span class="type">void</span> *parent</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *delim</code></em>,
                                                         <em class="parameter"><code><span class="type">int</span> dequote</code></em>);</pre>
<p>
Extracts a single token from <em class="parameter"><code>file</code></em> which is stopped when any character
in <em class="parameter"><code>delim</code></em> is encountered outside of a quoted string and not escaped
using a backslash.  If <em class="parameter"><code>delim</code></em> contains any whitespace character, then
all whitespace after the token is also consumed, but not returned,
including that with escaped newlines within it.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
If <em class="parameter"><code>pos</code></em> is given then it will be used as the offset within <em class="parameter"><code>file</code></em> to
begin (otherwise the start is assumed), and will be updated to point
to <em class="parameter"><code>delim</code></em> or past the end of the file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<p>
If you also want quotes to be removed and escaped characters to be
replaced with the character itself, set <em class="parameter"><code>dequote</code></em> to TRUE.
</p>
<p>
If <em class="parameter"><code>parent</code></em> is not NULL, it should be a pointer to another object which
will be used as a parent for the returned token.  When all parents
of the returned token are freed, the returned token will also be
freed.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>parent</code></em> :</span></p></td>
<td>parent object for returned token,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>delim</code></em> :</span></p></td>
<td>characters to stop on,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>dequote</code></em> :</span></p></td>
<td>remove quotes and escapes.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the token found or NULL on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-next-arg"></a><h3>nih_config_next_arg ()</h3>
<pre class="programlisting"><span class="returnvalue">char</span> *              nih_config_next_arg                 (<em class="parameter"><code>const <span class="type">void</span> *parent</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);</pre>
<p>
Extracts a single argument from <em class="parameter"><code>file</code></em>, a dequoted token that is stopped
on any comment, space or newline character that is not quoted or escaped
with a backslash.  Any whitespace after the argument is also consumed,
but not returned, including that with escaped newlines within it.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
If <em class="parameter"><code>pos</code></em> is given then it will be used as the offset within <em class="parameter"><code>file</code></em> to
begin (otherwise the start is assumed), and will be updated to point
to <em class="parameter"><code>delim</code></em> or past the end of the file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<p>
If <em class="parameter"><code>parent</code></em> is not NULL, it should be a pointer to another object which
will be used as a parent for the returned argument.  When all parents
of the returned argument are freed, the returned argument will also be
freed.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>parent</code></em> :</span></p></td>
<td>parent object for returned argument,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the argument found or NULL on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-next-line"></a><h3>nih_config_next_line ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                nih_config_next_line                (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);</pre>
<p>
Skips to the end of the current line in <em class="parameter"><code>file</code></em>, ignoring any tokens,
comments, etc. along the way.  If you want to ensure that no arguments
are missed, use <a class="link" href="nih-Config.html#nih-config-skip-comment" title="nih_config_skip_comment ()"><code class="function">nih_config_skip_comment()</code></a> instead.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
<em class="parameter"><code>pos</code></em> is used as the offset within <em class="parameter"><code>file</code></em> to begin, and will be updated
to point to past the end of the line or file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-skip-whitespace"></a><h3>nih_config_skip_whitespace ()</h3>
<pre class="programlisting"><span class="returnvalue">void</span>                nih_config_skip_whitespace          (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);</pre>
<p>
Skips an amount of whitespace and finds either the next token or the end
of the current line in <em class="parameter"><code>file</code></em>.  Escaped newlines within the whitespace
are treated as whitespace.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
<em class="parameter"><code>pos</code></em> is used as the offset within <em class="parameter"><code>file</code></em> to begin, and will be updated
to point to past the end of the line or file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-skip-comment"></a><h3>nih_config_skip_comment ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 nih_config_skip_comment             (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);</pre>
<p>
Skips a comment and finds the end of the current line in <em class="parameter"><code>file</code></em>.  If the
current position does not point to the end of a line, or a comment,
then an error is raised.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
<em class="parameter"><code>pos</code></em> is used as the offset within <em class="parameter"><code>file</code></em> to begin, and will be updated
to point to past the end of the line or file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>zero on success, negative value on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-parse-args"></a><h3>nih_config_parse_args ()</h3>
<pre class="programlisting"><span class="returnvalue">char</span> **             nih_config_parse_args               (<em class="parameter"><code>const <span class="type">void</span> *parent</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);</pre>
<p>
Extracts a list of arguments from <em class="parameter"><code>file</code></em>, each argument is separated
by whitespace and parsing is stopped when a newline is encountered
outside of a quoted string and not escaped using a backslash.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
If <em class="parameter"><code>pos</code></em> is given then it will be used as the offset within <em class="parameter"><code>file</code></em> to
begin (otherwise the start is assumed), and will be updated to point
past the end of the line or the end of the file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<p>
The arguments are returned as a NULL-terminated array, with each argument
dequoted before being returned.
</p>
<p>
If <em class="parameter"><code>parent</code></em> is not NULL, it should be a pointer to another object which
will be used as a parent for the returned array.  When all parents
of the returned array are freed, the returned array will also be
freed.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>parent</code></em> :</span></p></td>
<td>parent object for returned array,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the list of arguments found or NULL on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-parse-command"></a><h3>nih_config_parse_command ()</h3>
<pre class="programlisting"><span class="returnvalue">char</span> *              nih_config_parse_command            (<em class="parameter"><code>const <span class="type">void</span> *parent</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>);</pre>
<p>
Extracts a command and its arguments from <em class="parameter"><code>file</code></em>, stopping when a
newline is encountered outside of a quoted string and not escaped
using a blackslash.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
If <em class="parameter"><code>pos</code></em> is given then it will be used as the offset within <em class="parameter"><code>file</code></em> to
begin (otherwise the start is assumed), and will be updated to point
past the end of the line or the end of the file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<p>
The command is returned as a string allocated with <a class="link" href="nih-Alloc.html#nih-alloc" title="nih_alloc ()"><code class="function">nih_alloc()</code></a>.
</p>
<p>
If <em class="parameter"><code>parent</code></em> is not NULL, it should be a pointer to another object which
will be used as a parent for the returned string.  When all parents
of the returned string are freed, the returned string will also be
freed.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>parent</code></em> :</span></p></td>
<td>parent object for returned string,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number,</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the newly allocated command found or NULL on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-parse-block"></a><h3>nih_config_parse_block ()</h3>
<pre class="programlisting"><span class="returnvalue">char</span> *              nih_config_parse_block              (<em class="parameter"><code>const <span class="type">void</span> *parent</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *type</code></em>);</pre>
<p>
Extracts a block of text from <em class="parameter"><code>line</code></em>, stopping when the phrase "end <em class="parameter"><code>type</code></em>"
is encountered without any quotes or blackslash escaping within it.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
If <em class="parameter"><code>pos</code></em> is given then it will be used as the offset within <em class="parameter"><code>file</code></em> to
begin (otherwise the start is assumed), and will be updated to point
past the end of the block or the end of the file.
</p>
<p>
Either <em class="parameter"><code>file</code></em> or <em class="parameter"><code>pos</code></em> should point to the start of the block, after the
opening stanza, rather than the start of the stanza that opens it.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<p>
The block is returned as a string allocated with <a class="link" href="nih-Alloc.html#nih-alloc" title="nih_alloc ()"><code class="function">nih_alloc()</code></a>.
</p>
<p>
If <em class="parameter"><code>parent</code></em> is not NULL, it should be a pointer to another object which
will be used as a parent for the returned string.  When all parents
of the returned string are freed, the returned string will also be
freed.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>parent</code></em> :</span></p></td>
<td>parent object for returned string,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>type</code></em> :</span></p></td>
<td>block identifier.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>the text contained within the block or NULL on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-skip-block"></a><h3>nih_config_skip_block ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 nih_config_skip_block               (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code>const <span class="type">char</span> *type</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *endpos</code></em>);</pre>
<p>
Skips over a block of text from <em class="parameter"><code>file</code></em>, stopping when the phrase
"end <em class="parameter"><code>type</code></em>" is encountered without any quotes or blackslash escaping
within it.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
If <em class="parameter"><code>pos</code></em> is given then it will be used as the offset within <em class="parameter"><code>file</code></em> to
begin (otherwise the start is assumed), and will be updated to point
past the end of the block and block marker or the end of the file.
</p>
<p>
Either <em class="parameter"><code>file</code></em> or <em class="parameter"><code>pos</code></em> should point to the start of the block, after the
opening stanza, rather than the start of the stanza that opens it.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<p>
<em class="parameter"><code>endpos</code></em> will be set to the end of the block and the start of the block
marker, this is useful for determining the length of the block skipped,
to parse it for example.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>type</code></em> :</span></p></td>
<td>block identifier,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>endpos</code></em> :</span></p></td>
<td>pointer to end of block.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>zero on success, negative value on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-parse-stanza"></a><h3>nih_config_parse_stanza ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 nih_config_parse_stanza             (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code><a class="link" href="nih-Config.html#NihConfigStanza" title="NihConfigStanza"><span class="type">NihConfigStanza</span></a> *stanzas</code></em>,
                                                         <em class="parameter"><code><span class="type">void</span> *data</code></em>);</pre>
<p>
Extracts a configuration stanza from <em class="parameter"><code>file</code></em> and calls the handler
function for that stanza found in the <em class="parameter"><code>stanzas</code></em> table to handle the
rest of the line from thereon in.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
If <em class="parameter"><code>pos</code></em> is given then it will be used as the offset within <em class="parameter"><code>file</code></em> to
begin (otherwise the start is assumed), and will be updated to point
to <em class="parameter"><code>delim</code></em> or past the end of the file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>stanzas</code></em> :</span></p></td>
<td>table of stanza handlers,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>data</code></em> :</span></p></td>
<td>pointer to pass to stanza handler.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>zero on success or negative value on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-parse-file"></a><h3>nih_config_parse_file ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 nih_config_parse_file               (<em class="parameter"><code>const <span class="type">char</span> *file</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> len</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code><a class="link" href="nih-Config.html#NihConfigStanza" title="NihConfigStanza"><span class="type">NihConfigStanza</span></a> *stanzas</code></em>,
                                                         <em class="parameter"><code><span class="type">void</span> *data</code></em>);</pre>
<p>
Parses configuration file lines from <em class="parameter"><code>file</code></em>, skipping initial whitespace,
blank lines and comments while calling <a class="link" href="nih-Config.html#nih-config-parse-stanza" title="nih_config_parse_stanza ()"><code class="function">nih_config_parse_stanza()</code></a> for
anything else.
</p>
<p>
<em class="parameter"><code>file</code></em> may be a memory mapped file, in which case <em class="parameter"><code>pos</code></em> should be given
as the offset within and <em class="parameter"><code>len</code></em> should be the length of the file as a
whole.
</p>
<p>
If <em class="parameter"><code>pos</code></em> is given then it will be used as the offset within <em class="parameter"><code>file</code></em> to
begin (otherwise the start is assumed), and will be updated to point
to <em class="parameter"><code>delim</code></em> or past the end of the file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>file</code></em> :</span></p></td>
<td>file or string to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>len</code></em> :</span></p></td>
<td>length of <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>stanzas</code></em> :</span></p></td>
<td>table of stanza handlers,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>data</code></em> :</span></p></td>
<td>pointer to pass to stanza handler.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>zero on success, negative value on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="nih-config-parse"></a><h3>nih_config_parse ()</h3>
<pre class="programlisting"><span class="returnvalue">int</span>                 nih_config_parse                    (<em class="parameter"><code>const <span class="type">char</span> *filename</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *pos</code></em>,
                                                         <em class="parameter"><code><span class="type">size_t</span> *lineno</code></em>,
                                                         <em class="parameter"><code><a class="link" href="nih-Config.html#NihConfigStanza" title="NihConfigStanza"><span class="type">NihConfigStanza</span></a> *stanzas</code></em>,
                                                         <em class="parameter"><code><span class="type">void</span> *data</code></em>);</pre>
<p>
Reads <em class="parameter"><code>filename</code></em> into memory and them parses configuration lines from it
using <a class="link" href="nih-Config.html#nih-config-parse-file" title="nih_config_parse_file ()"><code class="function">nih_config_parse_file()</code></a>.
</p>
<p>
If <em class="parameter"><code>pos</code></em> is given then it will be used as the offset within <em class="parameter"><code>file</code></em> to
begin (otherwise the start is assumed), and will be updated to point
to <em class="parameter"><code>delim</code></em> or past the end of the file.
</p>
<p>
If <em class="parameter"><code>lineno</code></em> is given it will be incremented each time a new line is
discovered in the file.
</p>
<div class="variablelist"><table border="0" class="variablelist">
<colgroup>
<col align="left" valign="top">
<col>
</colgroup>
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>filename</code></em> :</span></p></td>
<td>name of file to parse,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>pos</code></em> :</span></p></td>
<td>offset within <em class="parameter"><code>file</code></em>,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>lineno</code></em> :</span></p></td>
<td>line number,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>stanzas</code></em> :</span></p></td>
<td>table of stanza handlers,</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>data</code></em> :</span></p></td>
<td>pointer to pass to stanza handler.</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>zero on success, negative value on raised error.</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.19</div>
</body>
</html>